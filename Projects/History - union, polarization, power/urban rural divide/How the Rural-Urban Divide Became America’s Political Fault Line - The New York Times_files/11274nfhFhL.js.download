define("DetailsPriorityFitter",[nut,"StyleUtils","EventUtils"],function(b,u,y){var z="itemMediaContainer title buyingPrice shippingDisclaimer pricePerUnit listPrice byLine prime author callToAction-wrapper customerReviews format brand".split(" "),A="itemMediaContainer title buyingPrice shippingDisclaimer pricePerUnit listPrice byLine prime author customerReviews callToAction-wrapper format brand".split(" "),v,w,e=function(d){for(var e=0;e<d.length;e++)for(var l=d[e],n=l.getBoundingClientRect(),c=
s(l),g=0;g<c.length;g++){var a=b("."+c[g],l)[0];if(a&&(a=a.getBoundingClientRect(),a.bottom>v||a.bottom>n.bottom||Math.round(a.right)>Math.round(w)||Math.round(a.right)>Math.round(n.right)))return!1}return!0},s=function(b){return u.existsClass("noPrice",b.className)?A:z},x=function(d,r){v=Math.min(b("#container")[0].getBoundingClientRect().bottom,b("#items")[0].getBoundingClientRect().bottom);w=Math.min(b("#container")[0].getBoundingClientRect().right,b("#items")[0].getBoundingClientRect().right);
r(b(".truncate"));for(var l={},n={},c=0;c<d.length;++c){var g=d[c];l[c]={};n[c]=[];for(var a=s(g),h=0;h<a.length;++h){var m=a[h],f=b("."+m,g)[0];f&&(l[c][m]=u.getStyle(f,"display"),f.style.display="none")}}g=0;m=Array(d.length);for(h=0;h<m.length;h++)m[h]=!0;do{h=!1;for(c=0;c<d.length;++c){var k=!0,f=d[c],a=s(f);if(m[c]&&!(g>=a.length)){var h=!0,a=a[g],p=b("."+a,f)[0];if(p){p.style.display=l[c][a];"none"===p.style.display&&(k=!1);if("shippingDisclaimer"===a){var q=b(".buyingPrice",f)[0];q&&"hidden"!==
q.style.display&&"none"!==q.style.display||(k=!1)}if(!(!k||e(d)&&e(b("#primeDayBadge"))||(r(b(".truncate",p)),e(d)&&e(b("#primeDayBadge"))))){for(var q=n[c],t=q.length-1;0<=t&&(r(b(".truncate",q[t])),e(d)&&e(b("#primeDayBadge")));--t);e(d)&&e(b("#primeDayBadge"))||(k=!1)}k?(f.className+=" "+a+"Shown",n[c].push(p)):(k=f,"shippingDisclaimer"===a&&!b(".seePrice",k)[0]&&(k=b(".buyingPrice",k)[0])&&(k.style.display="none"),p.style.display="none",f.className+=" "+a+"Hidden",0==g&&(m[c]=!1))}}}g++}while(h);
y.trigger("dra-details-prioritized",!0)};x.autoTruncates=!0;return x});