window.define("ClientSideUtils",["EventUtils",document],function(f,g){function c(){this.g=[];this.e=null;this.c=this.c.bind(this);d({event:"load",element:window,callback:this.c})}function b(a){this.options={start:a.start,end:a.end,m:a.after,a:a.custom,o:a.minInteractionTime,l:a.limit,element:a.element,elements:a.elements};this.f=0;this.d=this.d.bind(this);this.b=this.b.bind(this);this.p()}var d=f.attach,e=f.detach;b.prototype.p=function(){d({event:this.options.start,custom:this.options.a,callback:this.d,
element:this.options.element,elements:this.options.elements});this.options.end&&this.h(this.options.end,function(a){d({event:a,custom:this.options.a,callback:this.b,element:this.options.element,elements:this.options.elements})})};b.prototype.q=function(){e({event:this.options.start,custom:this.options.a,callback:this.d,element:this.options.element,elements:this.options.elements});this.options.end&&this.h(this.options.end,function(a){e({event:a,custom:this.options.a,callback:this.b,element:this.options.element,
elements:this.options.elements})})};b.prototype.d=function(a){this.start=(new Date).getTime();this.options.end||this.j(a)};b.prototype.b=function(a){this.j(a)};b.prototype.j=function(a){this.i()||(this.end=(new Date).getTime(),this.options.end&&!this.n()?this.start=void 0:(this.options.m(this.start,this.end-this.start,a),this.f+=1,this.i()&&this.q()))};b.prototype.h=function(a,b){if(a instanceof Array)for(var c=0;c<a.length;c++)b.call(this,a[c]);else b.call(this,a)};b.prototype.n=function(){var a=
this.end-this.start>=(this.options.o||0);return this.start&&this.end&&a};b.prototype.i=function(){return this.options.l?this.f>=this.options.l:!1};c.prototype.c=function(){e({event:"load",element:window,callback:this.c});this.e=g.getElementById("dra-html");this.k()};c.prototype.addPixel=function(a){this.g.push(a);this.k()};c.prototype.k=function(){if(null!==this.e)for(;0!==this.g.length;)this.e.appendChild(this.g.pop())};return{Metric:b,PixelQueue:c}});