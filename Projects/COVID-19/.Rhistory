axis.text = element_text(colour = 'white'),
plot.caption = element_text(hjust = 0, face = 'italic', size = 10),
plot.subtitle = element_text(face = 'italic', size = 11),
plot.background = element_rect(fill = 'black'),
panel.background = element_rect(fill = 'black'),
panel.grid = element_line(size = 0.25, colour = 'white')
) +
scale_fill_manual(guide = F, values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3]))
lockdown_states = lockdown_period_stats_days %>%
filter(lockdown_period != 'No Lockdown')
lockdown_effects_wide = pivot_wider(lockdown_period_stats %>% select(lockdown_period, median_r0_rolling_7), names_from =  c('lockdown_period'), values_from = c('median_r0_rolling_7'))
lockdown_effect = 1 - lockdown_effects_wide$`Post-Lockdown`/lockdown_effects_wide$`Pre-Lockdown`
ggplot(lockdown_states, aes(days_since_lockdown_start, median_r0_rolling_7, fill = lockdown_period)) +
# theme_classic() +
theme_bw() +
# geom_ribbon(aes(ymin = q10, ymax = q90), alpha = 0.3, size = 0) +
geom_ribbon(aes(ymin = q25, ymax = q75), alpha = 0.3, size = 0) +
geom_line(aes(colour = NULL, fill = NULL), colour = 'gray') +
geom_line(aes(colour = lockdown_period)) +
geom_point(aes(size = obs, colour = lockdown_period))  +
labs(
x = 'Days Pre/Post Lockdown', y = 'Rolling 7-Day R0',
caption = 'Chart: Taylor G. White\nData: covidtracking.com',
title = 'COVID-19 Rolling 7-Day Reproduction Number (R0) by Lockdown Status',
subtitle = sprintf('U.S. states, through %s. Lockdowns are associated with a %s decrease in COVID-19 transmission.',
max(all_covid_data_diffs_dates$date) %>% format('%B %d'),
percent(lockdown_effect, accuracy = 1))
) +
theme(
panel.grid.minor = element_blank(),
legend.text = element_text(size = 12),
title = element_text(size = 14),
plot.subtitle = element_text(size = 11, face = 'italic'),
plot.caption = element_text(size = 10, face = 'italic', hjust = 0),
legend.position = 'bottom'
) +
scale_colour_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_fill_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_size(guide = F, range = c(0.5, 3)) +
scale_y_continuous(breaks = seq(0, 20, by = 1)) +
scale_x_continuous(limits = c(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T)),
breaks = seq(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T), by = 2)) +
annotation_custom(ggplotGrob(r0_boxplot), xmin = -10, xmax = 12, ymin = 9, ymax = 17)
ggsave('output/rolling_r0_by_lockdown_period.png', height = 7, width = 9, units = 'in', dpi = 800)
ggplot(lockdown_states, aes(days_since_lockdown_start, median_r0_rolling_7, fill = lockdown_period)) +
# theme_classic() +
theme_bw() +
# geom_ribbon(aes(ymin = q10, ymax = q90), alpha = 0.3, size = 0) +
geom_ribbon(aes(ymin = q25, ymax = q75), alpha = 0.3, size = 0) +
geom_line(aes(colour = NULL, fill = NULL), colour = 'gray') +
geom_line(aes(colour = lockdown_period)) +
geom_point(aes(size = obs, colour = lockdown_period))  +
labs(
x = 'Days Pre/Post Lockdown', y = 'Rolling 7-Day R0',
caption = 'Chart: Taylor G. White\nData: covidtracking.com',
title = 'COVID-19 Rolling 7-Day Reproduction Number (R0) by Lockdown Status',
subtitle = sprintf('U.S. states, through %s. Lockdowns are associated with a %s decrease in COVID-19 transmission.',
max(all_covid_data_diffs_dates$date) %>% format('%B %d'),
percent(lockdown_effect, accuracy = 1))
) +
theme(
panel.grid.minor = element_blank(),
legend.text = element_text(size = 12),
title = element_text(size = 14),
plot.subtitle = element_text(size = 11, face = 'italic'),
plot.caption = element_text(size = 10, face = 'italic', hjust = 0),
legend.position = 'bottom'
) +
scale_colour_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_fill_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_size(guide = T, name = '# of States', range = c(0.5, 3)) +
scale_y_continuous(breaks = seq(0, 20, by = 1)) +
scale_x_continuous(limits = c(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T)),
breaks = seq(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T), by = 2)) +
annotation_custom(ggplotGrob(r0_boxplot), xmin = -10, xmax = 12, ymin = 9, ymax = 17)
ggplot(lockdown_states, aes(days_since_lockdown_start, median_r0_rolling_7, fill = lockdown_period)) +
# theme_classic() +
theme_bw() +
# geom_ribbon(aes(ymin = q10, ymax = q90), alpha = 0.3, size = 0) +
geom_ribbon(aes(ymin = q25, ymax = q75), alpha = 0.3, size = 0) +
geom_line(aes(colour = NULL, fill = NULL), colour = 'gray') +
geom_line(aes(colour = lockdown_period)) +
geom_point(aes(size = obs, colour = lockdown_period))  +
labs(
x = 'Days Pre/Post Lockdown', y = 'Rolling 7-Day R0',
caption = 'Chart: Taylor G. White\nData: covidtracking.com',
title = 'COVID-19 Rolling 7-Day Reproduction Number (R0) by Lockdown Status',
subtitle = sprintf('U.S. states, through %s. Lockdowns are associated with a %s decrease in COVID-19 transmission.',
max(all_covid_data_diffs_dates$date) %>% format('%B %d'),
percent(lockdown_effect, accuracy = 1))
) +
theme(
panel.grid.minor = element_blank(),
legend.text = element_text(size = 12),
title = element_text(size = 14),
plot.subtitle = element_text(size = 11, face = 'italic'),
plot.caption = element_text(size = 10, face = 'italic', hjust = 0),
legend.position = 'bottom'
) +
scale_colour_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_fill_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_size(name = '# of States', range = c(0.5, 3)) +
scale_y_continuous(breaks = seq(0, 20, by = 1)) +
scale_x_continuous(limits = c(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T)),
breaks = seq(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T), by = 2)) +
annotation_custom(ggplotGrob(r0_boxplot), xmin = -10, xmax = 12, ymin = 9, ymax = 17)
ggsave('output/rolling_r0_by_lockdown_period.png', height = 7, width = 9, units = 'in', dpi = 800)
ggplot(lockdown_states, aes(days_since_lockdown_start, median_r0_rolling_7, fill = lockdown_period)) +
# theme_classic() +
theme_bw() +
# geom_ribbon(aes(ymin = q10, ymax = q90), alpha = 0.3, size = 0) +
geom_ribbon(aes(ymin = q25, ymax = q75), alpha = 0.3, size = 0) +
geom_line(aes(colour = NULL, fill = NULL), colour = 'gray') +
geom_line(aes(colour = lockdown_period)) +
geom_point(aes(size = obs, colour = lockdown_period))  +
labs(
x = 'Days Pre/Post Lockdown', y = 'Rolling 7-Day R0',
caption = 'Chart: Taylor G. White\nData: covidtracking.com',
title = 'COVID-19 Rolling 7-Day Reproduction Number (R0) by Lockdown Status',
subtitle = sprintf('U.S. states, through %s. Lockdowns are associated with a %s decrease in COVID-19 transmission, though many areas saw decreased transmission pre-lockdown because other states shut down.',
max(all_covid_data_diffs_dates$date) %>% format('%B %d'),
percent(lockdown_effect, accuracy = 1)) %>% str_wrap(100)
) +
theme(
panel.grid.minor = element_blank(),
legend.text = element_text(size = 12),
title = element_text(size = 14),
plot.subtitle = element_text(size = 11, face = 'italic'),
plot.caption = element_text(size = 10, face = 'italic', hjust = 0),
legend.position = 'bottom'
) +
scale_colour_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_fill_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_size(name = '# of States', range = c(0.5, 3)) +
scale_y_continuous(breaks = seq(0, 20, by = 1)) +
scale_x_continuous(limits = c(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T)),
breaks = seq(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T), by = 2)) +
annotation_custom(ggplotGrob(r0_boxplot), xmin = -10, xmax = 12, ymin = 9, ymax = 17)
ggsave('output/rolling_r0_by_lockdown_period.png', height = 7, width = 9, units = 'in', dpi = 800)
ggplot(lockdown_states, aes(days_since_lockdown_start, median_r0_rolling_7, fill = lockdown_period)) +
# theme_classic() +
theme_bw() +
# geom_ribbon(aes(ymin = q10, ymax = q90), alpha = 0.3, size = 0) +
geom_ribbon(aes(ymin = q25, ymax = q75), alpha = 0.3, size = 0) +
geom_line(aes(colour = NULL, fill = NULL), colour = 'gray') +
geom_line(aes(colour = lockdown_period)) +
geom_point(aes(size = obs, colour = lockdown_period))  +
labs(
x = 'Days Pre/Post Lockdown', y = 'Rolling 7-Day R0',
caption = 'Chart: Taylor G. White\nData: covidtracking.com',
title = 'COVID-19 Rolling 7-Day Reproduction Number (R0) by Lockdown Status',
subtitle = sprintf('U.S. states, through %s. Lockdowns are associated with a %s decrease in COVID-19 transmission, though many areas saw decreased transmission pre-lockdown because other states shut down.',
max(all_covid_data_diffs_dates$date) %>% format('%B %d'),
percent(lockdown_effect, accuracy = 1)) %>% str_wrap(120)
) +
theme(
panel.grid.minor = element_blank(),
legend.text = element_text(size = 12),
title = element_text(size = 14),
plot.subtitle = element_text(size = 11, face = 'italic'),
plot.caption = element_text(size = 10, face = 'italic', hjust = 0),
legend.position = 'bottom'
) +
scale_colour_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_fill_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_size(name = '# of States', range = c(0.5, 3)) +
scale_y_continuous(breaks = seq(0, 20, by = 1)) +
scale_x_continuous(limits = c(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T)),
breaks = seq(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T), by = 2)) +
annotation_custom(ggplotGrob(r0_boxplot), xmin = -10, xmax = 12, ymin = 9, ymax = 17)
ggsave('output/rolling_r0_by_lockdown_period.png', height = 7, width = 9, units = 'in', dpi = 800)
ggplot(lockdown_states, aes(days_since_lockdown_start, median_r0_rolling_7, fill = lockdown_period)) +
# theme_classic() +
theme_bw() +
# geom_ribbon(aes(ymin = q10, ymax = q90), alpha = 0.3, size = 0) +
geom_ribbon(aes(ymin = q25, ymax = q75), alpha = 0.3, size = 0) +
geom_line(aes(colour = NULL, fill = NULL), colour = 'gray') +
geom_line(aes(colour = lockdown_period)) +
geom_point(aes(size = obs, colour = lockdown_period))  +
labs(
x = 'Days Pre/Post Lockdown', y = 'Rolling 7-Day R0',
caption = 'Chart: Taylor G. White\nData: covidtracking.com',
title = 'COVID-19 Rolling 7-Day Reproduction Number (R0) by Lockdown Status',
subtitle = sprintf('U.S. states, through %s. Lockdowns are associated with a %s decrease in COVID-19 transmission, though many areas saw decreased transmission pre-lockdown because other states shut down. Lines show median R0 and the ribbons represent the 25th and 75th percentiles.',
max(all_covid_data_diffs_dates$date) %>% format('%B %d'),
percent(lockdown_effect, accuracy = 1)) %>% str_wrap(120)
) +
theme(
panel.grid.minor = element_blank(),
legend.text = element_text(size = 12),
title = element_text(size = 14),
plot.subtitle = element_text(size = 11, face = 'italic'),
plot.caption = element_text(size = 10, face = 'italic', hjust = 0),
legend.position = 'bottom'
) +
scale_colour_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_fill_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_size(name = '# of States', range = c(0.5, 3)) +
scale_y_continuous(breaks = seq(0, 20, by = 1)) +
scale_x_continuous(limits = c(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T)),
breaks = seq(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T), by = 2)) +
annotation_custom(ggplotGrob(r0_boxplot), xmin = -10, xmax = 12, ymin = 9, ymax = 17)
ggsave('output/rolling_r0_by_lockdown_period.png', height = 7, width = 9, units = 'in', dpi = 800)
ggplot(lockdown_states, aes(days_since_lockdown_start, median_r0_rolling_7, fill = lockdown_period)) +
# theme_classic() +
theme_bw() +
# geom_ribbon(aes(ymin = q10, ymax = q90), alpha = 0.3, size = 0) +
geom_ribbon(aes(ymin = q25, ymax = q75), alpha = 0.3, size = 0) +
geom_line(aes(colour = NULL, fill = NULL), colour = 'gray') +
geom_line(aes(colour = lockdown_period)) +
geom_point(aes(size = obs, colour = lockdown_period))  +
labs(
x = 'Days Pre/Post Lockdown', y = 'Rolling 7-Day R0',
caption = 'Chart: Taylor G. White\nData: covidtracking.com',
title = 'COVID-19 Rolling 7-Day Reproduction Number (R0) by Lockdown Status',
subtitle = sprintf('U.S. states, through %s. Lockdowns are associated with a %s decrease in COVID-19 transmission, though many areas saw decreased transmission pre-lockdown because other states shut down. Lines show median R0 and ribbons represent the 25th and 75th percentiles.',
max(all_covid_data_diffs_dates$date) %>% format('%B %d'),
percent(lockdown_effect, accuracy = 1)) %>% str_wrap(120)
) +
theme(
panel.grid.minor = element_blank(),
legend.text = element_text(size = 12),
title = element_text(size = 14),
plot.subtitle = element_text(size = 11, face = 'italic'),
plot.caption = element_text(size = 10, face = 'italic', hjust = 0),
legend.position = 'bottom'
) +
scale_colour_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_fill_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_size(name = '# of States', range = c(0.5, 3)) +
scale_y_continuous(breaks = seq(0, 20, by = 1)) +
scale_x_continuous(limits = c(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T)),
breaks = seq(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T), by = 2)) +
annotation_custom(ggplotGrob(r0_boxplot), xmin = -10, xmax = 12, ymin = 9, ymax = 17)
ggsave('output/rolling_r0_by_lockdown_period.png', height = 7, width = 9, units = 'in', dpi = 800)
ggplot(lockdown_states, aes(days_since_lockdown_start, median_r0_rolling_7, fill = lockdown_period)) +
# theme_classic() +
theme_bw() +
# geom_ribbon(aes(ymin = q10, ymax = q90), alpha = 0.3, size = 0) +
geom_ribbon(aes(ymin = q25, ymax = q75), alpha = 0.3, size = 0) +
geom_line(aes(colour = NULL, fill = NULL), colour = 'gray') +
geom_line(aes(colour = lockdown_period)) +
geom_point(aes(size = obs, colour = lockdown_period))  +
labs(
x = 'Days Pre/Post Lockdown', y = 'Rolling 7-Day R0',
caption = 'Chart: Taylor G. White\nData: covidtracking.com',
title = 'COVID-19 Rolling 7-Day Reproduction Number (R0) by Lockdown Status',
subtitle = sprintf('U.S. states, through %s. Lockdowns are associated with a %s decrease in COVID-19 transmission, though many areas experienced decreased transmission pre-lockdown because other states shut down. Lines show median R0 and ribbons represent the 25th and 75th percentiles.',
max(all_covid_data_diffs_dates$date) %>% format('%B %d'),
percent(lockdown_effect, accuracy = 1)) %>% str_wrap(120)
) +
theme(
panel.grid.minor = element_blank(),
legend.text = element_text(size = 12),
title = element_text(size = 14),
plot.subtitle = element_text(size = 11, face = 'italic'),
plot.caption = element_text(size = 10, face = 'italic', hjust = 0),
legend.position = 'bottom'
) +
scale_colour_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_fill_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_size(name = '# of States', range = c(0.5, 3)) +
scale_y_continuous(breaks = seq(0, 20, by = 1)) +
scale_x_continuous(limits = c(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T)),
breaks = seq(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T), by = 2)) +
annotation_custom(ggplotGrob(r0_boxplot), xmin = -10, xmax = 12, ymin = 9, ymax = 17)
ggsave('output/rolling_r0_by_lockdown_period.png', height = 7, width = 9, units = 'in', dpi = 800)
ggplot(lockdown_states, aes(days_since_lockdown_start, median_r0_rolling_7, fill = lockdown_period)) +
# theme_classic() +
theme_bw() +
# geom_ribbon(aes(ymin = q10, ymax = q90), alpha = 0.3, size = 0) +
geom_ribbon(aes(ymin = q25, ymax = q75), alpha = 0.3, size = 0) +
geom_line(aes(colour = NULL, fill = NULL), colour = 'gray') +
geom_line(aes(colour = lockdown_period)) +
geom_point(aes(size = obs, colour = lockdown_period))  +
labs(
x = 'Days Pre/Post Lockdown', y = 'Rolling 7-Day R0',
caption = 'Chart: Taylor G. White\nData: covidtracking.com',
title = 'COVID-19 Rolling 7-Day Reproduction Number (R0) by Lockdown Status',
subtitle = sprintf('U.S. states, through %s. Lockdowns are associated with a %s decrease in COVID-19 transmission, though many areas experienced decreased transmission pre-lockdown because other states shut down. Lines show median R0 and ribbons represent the 25th and 75th percentiles.',
max(all_covid_data_diffs_dates$date) %>% format('%B %d'),
percent(lockdown_effect, accuracy = 1)) %>% str_wrap(115)
) +
theme(
panel.grid.minor = element_blank(),
legend.text = element_text(size = 12),
title = element_text(size = 14),
plot.subtitle = element_text(size = 11, face = 'italic'),
plot.caption = element_text(size = 10, face = 'italic', hjust = 0),
legend.position = 'bottom'
) +
scale_colour_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_fill_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_size(name = '# of States', range = c(0.5, 3)) +
scale_y_continuous(breaks = seq(0, 20, by = 1)) +
scale_x_continuous(limits = c(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T)),
breaks = seq(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T), by = 2)) +
annotation_custom(ggplotGrob(r0_boxplot), xmin = -10, xmax = 12, ymin = 9, ymax = 17)
ggsave('output/rolling_r0_by_lockdown_period.png', height = 7, width = 9, units = 'in', dpi = 800)
lockdown_effects_wide
ggplot(lockdown_states, aes(days_since_lockdown_start, median_r0_rolling_7, fill = lockdown_period)) +
# theme_classic() +
theme_bw() +
# geom_ribbon(aes(ymin = q10, ymax = q90), alpha = 0.3, size = 0) +
geom_ribbon(aes(ymin = q25, ymax = q75), alpha = 0.3, size = 0) +
geom_line(aes(colour = NULL, fill = NULL), colour = 'gray') +
geom_line(aes(colour = lockdown_period)) +
geom_point(aes(size = obs, colour = lockdown_period))  +
labs(
x = 'Days Pre/Post Lockdown', y = 'Rolling 7-Day R0',
caption = 'Chart: Taylor G. White\nData: covidtracking.com',
title = 'COVID-19 Rolling 7-Day Reproduction Number (R0) by Lockdown Status',
subtitle = sprintf('U.S. states, through %s. Lockdowns are associated with a %s decrease in COVID-19 transmission (%s to %s), though many areas experienced decreased transmission pre-lockdown because other states shut down. Lines show median R0 and ribbons represent the 25th and 75th percentiles.',
max(all_covid_data_diffs_dates$date) %>% format('%B %d'),
round(lockdown_effects_wide$`Pre-Lockdown`, 2),
round(lockdown_effects_wide$`Post-Lockdown`, 2),
percent(lockdown_effect, accuracy = 1)) %>% str_wrap(115)
) +
theme(
panel.grid.minor = element_blank(),
legend.text = element_text(size = 12),
title = element_text(size = 14),
plot.subtitle = element_text(size = 11, face = 'italic'),
plot.caption = element_text(size = 10, face = 'italic', hjust = 0),
legend.position = 'bottom'
) +
scale_colour_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_fill_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_size(name = '# of States', range = c(0.5, 3)) +
scale_y_continuous(breaks = seq(0, 20, by = 1)) +
scale_x_continuous(limits = c(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T)),
breaks = seq(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T), by = 2)) +
annotation_custom(ggplotGrob(r0_boxplot), xmin = -10, xmax = 12, ymin = 9, ymax = 17)
ggsave('output/rolling_r0_by_lockdown_period.png', height = 7, width = 9, units = 'in', dpi = 800)
ggplot(lockdown_states, aes(days_since_lockdown_start, median_r0_rolling_7, fill = lockdown_period)) +
# theme_classic() +
theme_bw() +
# geom_ribbon(aes(ymin = q10, ymax = q90), alpha = 0.3, size = 0) +
geom_ribbon(aes(ymin = q25, ymax = q75), alpha = 0.3, size = 0) +
geom_line(aes(colour = NULL, fill = NULL), colour = 'gray') +
geom_line(aes(colour = lockdown_period)) +
geom_point(aes(size = obs, colour = lockdown_period))  +
labs(
x = 'Days Pre/Post Lockdown', y = 'Rolling 7-Day R0',
caption = 'Chart: Taylor G. White\nData: covidtracking.com',
title = 'COVID-19 Rolling 7-Day Reproduction Number (R0) by Lockdown Status',
subtitle = sprintf('U.S. states, through %s. Lockdowns are associated with a %s decrease in COVID-19 transmission (%s to %s), though many areas experienced decreased transmission pre-lockdown because other states shut down. Lines show median R0 and ribbons represent the 25th and 75th percentiles.',
max(all_covid_data_diffs_dates$date) %>% format('%B %d'),
percent(lockdown_effect, accuracy = 1),
round(lockdown_effects_wide$`Pre-Lockdown`, 2),
round(lockdown_effects_wide$`Post-Lockdown`, 2)
) %>% str_wrap(115)
) +
theme(
panel.grid.minor = element_blank(),
legend.text = element_text(size = 12),
title = element_text(size = 14),
plot.subtitle = element_text(size = 11, face = 'italic'),
plot.caption = element_text(size = 10, face = 'italic', hjust = 0),
legend.position = 'bottom'
) +
scale_colour_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_fill_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_size(name = '# of States', range = c(0.5, 3)) +
scale_y_continuous(breaks = seq(0, 20, by = 1)) +
scale_x_continuous(limits = c(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T)),
breaks = seq(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T), by = 2)) +
annotation_custom(ggplotGrob(r0_boxplot), xmin = -10, xmax = 12, ymin = 9, ymax = 17)
ggsave('output/rolling_r0_by_lockdown_period.png', height = 7, width = 9, units = 'in', dpi = 800)
ggplot(lockdown_states, aes(days_since_lockdown_start, median_r0_rolling_7, fill = lockdown_period)) +
# theme_classic() +
theme_bw() +
# geom_ribbon(aes(ymin = q10, ymax = q90), alpha = 0.3, size = 0) +
geom_ribbon(aes(ymin = q25, ymax = q75), alpha = 0.3, size = 0) +
geom_line(aes(colour = NULL, fill = NULL), colour = 'gray') +
geom_line(aes(colour = lockdown_period)) +
geom_point(aes(size = obs, colour = lockdown_period))  +
labs(
x = 'Days Pre/Post Lockdown', y = 'Rolling 7-Day R0',
caption = 'Chart: Taylor G. White\nData: covidtracking.com',
title = 'COVID-19 Rolling 7-Day Reproduction Number (R0) by Lockdown Status',
subtitle = sprintf('U.S. states, through %s. Lockdowns are associated with a %s decrease in COVID-19 transmission (R0 of %s down to %s), though many areas experienced decreased transmission pre-lockdown because other states shut down. Lines show median R0 and ribbons represent the 25th and 75th percentiles.',
max(all_covid_data_diffs_dates$date) %>% format('%B %d'),
percent(lockdown_effect, accuracy = 1),
round(lockdown_effects_wide$`Pre-Lockdown`, 2),
round(lockdown_effects_wide$`Post-Lockdown`, 2)
) %>% str_wrap(115)
) +
theme(
panel.grid.minor = element_blank(),
legend.text = element_text(size = 12),
title = element_text(size = 14),
plot.subtitle = element_text(size = 11, face = 'italic'),
plot.caption = element_text(size = 10, face = 'italic', hjust = 0),
legend.position = 'bottom'
) +
scale_colour_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_fill_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_size(name = '# of States', range = c(0.5, 3)) +
scale_y_continuous(breaks = seq(0, 20, by = 1)) +
scale_x_continuous(limits = c(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T)),
breaks = seq(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T), by = 2)) +
annotation_custom(ggplotGrob(r0_boxplot), xmin = -10, xmax = 12, ymin = 9, ymax = 17)
ggsave('output/rolling_r0_by_lockdown_period.png', height = 7, width = 9, units = 'in', dpi = 800)
ggplot(lockdown_states, aes(days_since_lockdown_start, median_r0_rolling_7, fill = lockdown_period)) +
# theme_classic() +
theme_bw() +
# geom_ribbon(aes(ymin = q10, ymax = q90), alpha = 0.3, size = 0) +
geom_ribbon(aes(ymin = q25, ymax = q75), alpha = 0.3, size = 0) +
geom_line(aes(colour = NULL, fill = NULL), colour = 'gray') +
geom_line(aes(colour = lockdown_period)) +
geom_point(aes(size = obs, colour = lockdown_period))  +
labs(
x = 'Days Pre/Post Lockdown', y = 'Rolling 7-Day R0',
caption = 'Chart: Taylor G. White\nData: covidtracking.com',
title = 'COVID-19 Rolling 7-Day Reproduction Number (R0) by Lockdown Status',
subtitle = sprintf('U.S. states, through %s. Lockdowns are associated with a %s decrease in COVID-19 transmission (median R0 of %s down to %s), though many areas experienced decreased transmission pre-lockdown because other states shut down. Lines show median R0 and ribbons represent the 25th and 75th percentiles.',
max(all_covid_data_diffs_dates$date) %>% format('%B %d'),
percent(lockdown_effect, accuracy = 1),
round(lockdown_effects_wide$`Pre-Lockdown`, 2),
round(lockdown_effects_wide$`Post-Lockdown`, 2)
) %>% str_wrap(115)
) +
theme(
panel.grid.minor = element_blank(),
legend.text = element_text(size = 12),
title = element_text(size = 14),
plot.subtitle = element_text(size = 11, face = 'italic'),
plot.caption = element_text(size = 10, face = 'italic', hjust = 0),
legend.position = 'bottom'
) +
scale_colour_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_fill_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_size(name = '# of States', range = c(0.5, 3)) +
scale_y_continuous(breaks = seq(0, 20, by = 1)) +
scale_x_continuous(limits = c(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T)),
breaks = seq(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T), by = 2)) +
annotation_custom(ggplotGrob(r0_boxplot), xmin = -10, xmax = 12, ymin = 9, ymax = 17)
ggsave('output/rolling_r0_by_lockdown_period.png', height = 7, width = 9, units = 'in', dpi = 800)
ggplot(lockdown_states, aes(days_since_lockdown_start, median_r0_rolling_7, fill = lockdown_period)) +
# theme_classic() +
theme_bw() +
# geom_ribbon(aes(ymin = q10, ymax = q90), alpha = 0.3, size = 0) +
geom_ribbon(aes(ymin = q25, ymax = q75), alpha = 0.3, size = 0) +
geom_line(aes(colour = NULL, fill = NULL), colour = 'gray') +
geom_line(aes(colour = lockdown_period)) +
geom_point(aes(size = obs, colour = lockdown_period))  +
labs(
x = 'Days Pre/Post Lockdown', y = 'Rolling 7-Day R0',
caption = 'Chart: Taylor G. White\nData: covidtracking.com',
title = 'COVID-19 Rolling 7-Day Reproduction Number (R0) by Lockdown Status',
subtitle = sprintf('U.S. states, through %s. Lockdowns are associated with a %s decrease in COVID-19 transmission (median R0 of %s down to %s), though many areas experienced decreased transmission pre-lockdown because other states shut down. Lines show median R0 and ribbons represent the 25th and 75th percentiles.',
max(all_covid_data_diffs_dates$date) %>% format('%B %d'),
percent(lockdown_effect, accuracy = 1),
round(lockdown_effects_wide$`Pre-Lockdown`, 2),
round(lockdown_effects_wide$`Post-Lockdown`, 2)
) %>% str_wrap(115)
) +
theme(
panel.grid.minor = element_blank(),
legend.text = element_text(size = 12),
title = element_text(size = 14),
plot.subtitle = element_text(size = 11, face = 'italic'),
plot.caption = element_text(size = 10, face = 'italic', hjust = 0),
legend.position = 'bottom'
) +
scale_colour_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_fill_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_size(name = '# of States', range = c(0.5, 3)) +
scale_y_continuous(breaks = seq(0, 20, by = 1)) +
scale_x_continuous(limits = c(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T)),
breaks = seq(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T), by = 2)) +
annotation_custom(ggplotGrob(r0_boxplot), xmin = -10, xmax = 12, ymin = 8, ymax = 17)
ggsave('output/rolling_r0_by_lockdown_period.png', height = 7, width = 9, units = 'in', dpi = 800)
ggplot(lockdown_states, aes(days_since_lockdown_start, median_r0_rolling_7, fill = lockdown_period)) +
# theme_classic() +
theme_bw() +
# geom_ribbon(aes(ymin = q10, ymax = q90), alpha = 0.3, size = 0) +
geom_ribbon(aes(ymin = q25, ymax = q75), alpha = 0.3, size = 0) +
geom_line(aes(colour = NULL, fill = NULL), colour = 'gray') +
geom_line(aes(colour = lockdown_period)) +
geom_point(aes(size = obs, colour = lockdown_period))  +
labs(
x = 'Days Pre/Post Lockdown', y = 'Rolling 7-Day R0',
caption = 'Chart: Taylor G. White\nData: covidtracking.com',
title = 'COVID-19 Rolling 7-Day Reproduction Number (R0) by Lockdown Status',
subtitle = sprintf('U.S. states, through %s. State lockdowns are associated with a %s decrease in COVID-19 transmission (median R0 of %s down to %s), though many areas experienced decreased transmission pre-lockdown because other states shut down. Lines show median R0 and ribbons represent the 25th and 75th percentiles.',
max(all_covid_data_diffs_dates$date) %>% format('%B %d'),
percent(lockdown_effect, accuracy = 1),
round(lockdown_effects_wide$`Pre-Lockdown`, 2),
round(lockdown_effects_wide$`Post-Lockdown`, 2)
) %>% str_wrap(115)
) +
theme(
panel.grid.minor = element_blank(),
legend.text = element_text(size = 12),
title = element_text(size = 14),
plot.subtitle = element_text(size = 11, face = 'italic'),
plot.caption = element_text(size = 10, face = 'italic', hjust = 0),
legend.position = 'bottom'
) +
scale_colour_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_fill_manual(name = '', values = c('Pre-Lockdown' = pal_3[1], 'Post-Lockdown' = pal_3[2], 'No Lockdown' = pal_3[3])) +
scale_size(name = '# of States', range = c(0.5, 3)) +
scale_y_continuous(breaks = seq(0, 20, by = 1)) +
scale_x_continuous(limits = c(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T)),
breaks = seq(-30, max(lockdown_states$days_since_lockdown_start, na.rm = T), by = 2)) +
annotation_custom(ggplotGrob(r0_boxplot), xmin = -10, xmax = 12, ymin = 8, ymax = 17)
ggsave('output/rolling_r0_by_lockdown_period.png', height = 7, width = 9, units = 'in', dpi = 800)
library(FinCal)
install.packages('FinCal')
library(FinCal)
